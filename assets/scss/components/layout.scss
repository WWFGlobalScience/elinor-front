.app__content {
  @apply transition;
  &.is--overlay {
    -webkit-filter: blur(4px);
    filter: blur(4px);
    max-height: 100vh;
    overflow: hidden;
  }
}

.app__content__main {
  flex: 1;
  min-width: 0; // Allow flex item to shrink below content size
  overflow-x: hidden; // Prevent horizontal overflow
  width: 100%; // Ensure it takes available space
  background-color: $primary-background-color; // Add white background color

  // Desktop: account for fixed sidebar width
  @media (min-width: $desktop-breakpoint-min) {
    margin-left: 231px; // Push content to the right of fixed sidebar
    width: auto; // Let flex handle the width naturally
    flex: 1 1 auto; // Take remaining space after margin
  }
}

main {
  @apply flex;
  // min-height: 100vh;
  width: 100%;
  overflow-x: hidden; // Prevent horizontal overflow

  // Mobile: full width when sidebar is hidden
  @media (max-width: $tablet-breakpoint) {
    @apply flex-col;
  }

  .page {
    @apply flex-1 pt-16 pb-0 max-w-full;
    &.page--flushed {
      @apply pt-0;
      background-color: $primary-background-color;
    }
    .page--assessments__top {
      @apply flex items-center mb-[25px] pb-[233px] sm:flex-col sm:pb-6 sm:items-start;

      & > * {
        @apply flex-1;
      }

      .page--assessments__top-img {
        @apply absolute bottom-0 left-0 w-full h-52 object-contain z-0 mx-auto sm:relative sm:mb-6;
      }
    }

    .page--assessments__top-actions {
      @apply flex items-center justify-between mb-6;

      // Between laptop (lg: 1024px) and laptop-l (xl: 1280px): use grid layout with auto-wrap
      @media (min-width: 1024px) and (max-width: 1279px) {
        @apply grid grid-cols-2 gap-4;
        justify-content: stretch;

        // Make aggregate area span full width and use grid for its buttons
        .assessments-aggregate-area {
          @apply grid grid-cols-2 gap-4;
          grid-column: 1 / -1; // Span all columns on first row
          width: 100%;
          margin: 0 !important;
        }

        // Make the flex container span full width and use grid for its buttons
        > div.flex {
          @apply grid grid-cols-2 gap-4;
          grid-column: 1 / -1; // Span all columns on second row
          width: 100%;
          margin: 0 !important;
          justify-content: stretch;
        }

        // Buttons should fill their grid cells
        .btn--new-sm,
        .btn--md {
          @apply w-full justify-center;
          width: 100% !important;
          margin: 0 !important;
        }

        // Ensure wrapper divs inside flex containers are also full width
        > div.flex > div {
          @apply w-full;
          width: 100% !important;
          margin: 0 !important;
        }
      }

      // Below 1024px: stack all buttons vertically (one per row), center-aligned
      @media (max-width: $desktop-breakpoint) {
        @apply flex-col items-center;
        gap: 16px !important; // Consistent 16px vertical spacing between buttons

        .assessments-aggregate-area {
          @apply flex-col w-full items-center;
          gap: 16px !important; // Consistent 16px vertical spacing
          margin: 0 !important;
        }

        > div.flex {
          @apply flex-col w-full items-center;
          gap: 16px !important; // Consistent 16px vertical spacing
          margin: 0 !important;
        }

        // All buttons full width and center-aligned below 1024px
        .btn--new-sm,
        .btn--md {
          @apply w-full justify-center;
          width: 100% !important;
          margin: 0 !important; // Remove any button margins
        }

        // Ensure wrapper divs inside flex containers are also full width
        > div.flex > div {
          @apply w-full;
          width: 100% !important;
          margin: 0 !important; // Remove wrapper margins
        }
      }

      .assessments-aggregate-area {
        @apply flex items-center gap-4;
      }

      // Show filters button on mobile/tablet and between desktop to desktop-l (below 1280px)
      .btn--show-filters-mobile {
        @apply hidden items-center gap-2 bg-[#43A0BD] hover:bg-[#3A90AB] text-white rounded-full justify-center py-3 px-6 transition-all duration-300 font-medium;

        // Show below 1280px (mobile, tablet, and desktop to desktop-l range)
        @media (max-width: 1279px) {
          @apply flex;
          display: flex !important;
        }
        @media (max-width: $desktop-breakpoint) {
          @apply flex w-full;
          display: flex !important;
          width: 100% !important;
        }

        // Hide text "Show filters" below mobile view, show only icon
        @media (max-width: $mobile-breakpoint) {
          span {
            display: none !important;
          }
          // Adjust padding for icon-only button
          @apply px-3;
        }

        img {
          @apply w-5 h-5;
          filter: brightness(0) invert(1); // Make icon white
        }
      }

      // Hide search and filters below 1280px (mobile, tablet, and desktop to desktop-l range)
      .assessments-search-desktop,
      .assessments-filters-desktop {
        @media (max-width: 1279px) {
          display: none !important;
          visibility: hidden !important;
          opacity: 0 !important;
          height: 0 !important;
          overflow: hidden !important;
          width: 0 !important;
          margin: 0 !important;
          padding: 0 !important;
        }
      }

      #form--search {
        @apply mt-0 flex-1 max-w-[480px] pr-5 #{!important};

        // Hide search form below 1280px (mobile, tablet, and desktop to desktop-l range)
        @media (max-width: 1279px) {
          display: none !important;
          visibility: hidden !important;
          opacity: 0 !important;
          height: 0 !important;
          overflow: hidden !important;
          width: 0 !important;
          margin: 0 !important;
          padding: 0 !important;
        }

        input {
          @apply h-[48px] w-full px-4 pl-12  #{!important};

          &::placeholder {
            @apply text-[#9C9C9C] #{!important};
          }
        }

        .input.input--ico .input__ico {
          @apply right-[unset] left-[6px] #{!important};
        }
      }

      .filters-container {
        @apply flex items-center gap-4;

        // Hide filters-container below 1280px (mobile, tablet, and desktop to desktop-l range)
        @media (max-width: 1279px) {
          display: none !important;
          visibility: hidden !important;
          opacity: 0 !important;
          height: 0 !important;
          overflow: hidden !important;
          width: 0 !important;
          margin: 0 !important;
          padding: 0 !important;
        }

        .filters-container__item {
          select {
            @apply h-[48px] w-[fit-content] max-w-[200px] px-4 pr-[48px] #{!important};
            background: url('~/assets/img/keyboard_arrow_down.svg') no-repeat
              right 16px center;
            border-radius: 12px;
            border: 1px solid var(--Grey-2, #dadada);
            /* Remove default select caret */
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            font-size: 16px;
            font-weight: 500;
            line-height: 20px;
            color: var(--Grey-2, #9c9c9c);

            &.country {
              @apply max-w-[180px] #{!important};
            }
          }
        }
      }
    }
  }

  .container {
    @apply max-w-[1209px] w-full mx-auto pl-[83px] pr-[76px] md:pl-4 md:pr-4;
  }

  // Reduce container padding on assessments page below desktop view (16px)
  .page--assessments .container,
  .section--ma-results .container {
    @media (max-width: $desktop-breakpoint) {
      @include mobile-container-padding($desktop-breakpoint);
    }
  }
  .page--assessment-edit,
  .page--assesment,
  .page--assessment {
    @apply pt-0;
    // Reuse primary background color (white) for assessment view page
    background-color: $primary-background-color;
  }
}

//grid
.g-grid--5 {
  @apply grid grid-cols-5 gap-14;
}
.g-grid--2 {
  @apply grid grid-cols-2 gap-14;
}
.g-grid--1 {
  @apply grid grid-cols-1 gap-14;
}

.g-grid--2-1-lg {
  @apply grid grid-cols-2 gap-4 lg:grid-cols-1;
}

.g-grid--2-1-lg-0 {
  @apply grid grid-cols-2 lg:grid-cols-1;
}

.g-grid--2-1-sm {
  @apply grid grid-cols-2 gap-4 lg:grid-cols-1;
}

.g-grid--3-1-md {
  @apply grid grid-cols-3 md:grid-cols-1 gap-14;
}

.g-grid--3-1-lg {
  @apply grid grid-cols-3 lg:grid-cols-1 gap-14;
}

.g-grid--3-1-sm {
  @apply grid grid-cols-3 sm:grid-cols-1 gap-14;
}

.g-grid--4-1-sm {
  @apply grid grid-cols-4 sm:grid-cols-1 gap-14;
}

.g-grid--4-1-lg {
  @apply grid grid-cols-4 lg:grid-cols-1 gap-14;
}

.g-colspan--2 {
  @apply col-span-2;
}
.g-colspan--1-full-md {
  @apply col-span-1 md:col-span-full;
}

.g-colspan--2-full-md {
  @apply col-span-2 md:col-span-full;
}

.g-colspan--2-full-lg {
  @apply col-span-2 lg:col-span-full;
}

.g-colspan--3-full-md {
  @apply col-span-3 md:col-span-full;
}

.g-colspan--3-full-lg {
  @apply col-span-3 lg:col-span-full;
}

.g-colspan--4-full-md {
  @apply col-span-4 md:col-span-full;
}

.g-colspan--1-2-lg {
  @apply col-span-1 lg:col-span-2;
}
.g-colstart--1-full-lg {
  @apply col-start-1 col-end-2 lg:col-span-full;
}
.g-colstart--2-full-lg {
  @apply col-start-2 col-end-5 lg:col-span-full;
}

.popup__grid {
  @apply grid grid-cols-2 sm:grid-cols-1 gap-6 mb-6;

  .description {
    img {
      @apply mb-5 w-8;
    }
    h4 {
      @apply text-grayy text-lg mb-2 font-bold leading-relaxed;
    }

    p {
      @apply text-base text-grayy leading-relaxed;
    }

    a {
      @apply text-turqy cursor-pointer;
    }
  }
  .left {
    .dropzone {
      @apply h-full;
      .dz-message {
        @apply h-full;
      }
      .file__drag {
        @apply h-full #{!important};
      }
    }

    .form,
    .form__group,
    .form__row,
    .form__row > *,
    .input.input--file .file {
      @apply h-full #{!important};
    }
  }
  .right {
    .description {
      // @apply pl-10 relative sm:pl-0 sm:pt-10;
      // &::after {
      //     content: '';
      //     @apply absolute inset-y-0 left-0 h-64 border-r border-grayy-border sm:w-full sm:border-t sm:border-r-0;
      // }
    }
  }
}

.publish__layout {
  @apply flex flex-row md:flex-col mt-11;

  .publish__num {
    @apply min-w-[20%];
  }
}

.row-btn {
  @apply flex mt-8;
  &.row-btn--center {
    @apply justify-center;
  }
}

.grid-profile {
  @apply grid grid-cols-4;

  .avatar {
    @apply col-start-1 col-end-2 place-self-center;
  }
  .name {
    @apply col-start-2 col-end-5 self-center;
  }

  .content {
    @apply col-start-2 col-end-5 sm:col-start-1;
    .row-btn {
      @apply flex items-center sm:flex-col;
      .btn {
        @apply flex-shrink-0 mr-4 sm:mb-4;
      }
    }
  }
}
.report-wrap {
  height: 1px;
  width: 1px;
  overflow: hidden;
}
.page-report {
  @apply w-[1440px] h-[1024px] m-auto grid overflow-hidden tracking-normal;
  grid-template-columns: 172px 72px auto;
  .aside-report {
    @apply col-start-1 col-end-3 row-span-full grid z-10 h-[1023px];
    grid-template-columns: 100px 72px 72px;
    .background {
      @apply col-start-1 col-end-3 row-span-full h-full flex overflow-hidden;
      img {
        @apply object-cover;
      }
    }
    .brand {
      @apply col-start-2 col-end-4 row-span-full mt-4;
    }
  }
  .content-report {
    @apply col-start-2 col-end-4 row-span-full p-10 pt-4 flex flex-col relative;
  }

  .elinor__tag {
    @apply flex flex-col justify-center items-center px-4;
  }
  .container-report {
    @apply grid grid-cols-2 gap-6 h-full pt-8 static;
    .col-report {
      @apply h-full flex flex-col gap-10 justify-start;
    }
  }
  .container-report {
    .col-report.legend:last-child {
      div {
        &:last-child {
          @apply mt-auto;
        }
      }
    }
  }
  .container-table {
  }
  &--map {
    grid-template-columns: 570px auto;
    .aside-report {
      @apply col-span-1 flex;
      .map-content {
        @apply absolute left-0 top-0 w-full h-full z-10 flex justify-between p-8 pb-12 flex-col;
      }
    }
    .content-report {
      header {
        @apply ml-0 border-0;
      }
    }
  }
}

.popover {
  @apply absolute shadow-sm max-w-max w-[90%] px-4 text-white py-3 text-sm bg-[#f67e49] top-5 left-5 rounded-md z-10;

  a {
    @apply underline font-bold;
  }
}

.page--assessments {
  @apply pt-20;
  // Reuse primary background color for assessments page (works for both logged in and not logged in)
  background-color: $primary-background-color;
  .popover {
    @apply left-10 top-[8px];
  }
}
